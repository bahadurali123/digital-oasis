<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link rel="shortcut icon" href="/public/images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="../public/css/style.css">
    <link rel="stylesheet" href="../public/css/footer.css">
    <link rel="stylesheet" href="../public/css/blog.css">
    <title>Blog</title>
</head>

<body>
    <%- include('partials/nav.ejs', {user:authuser})-%>
        <div id="blogwelcome">
            <p>ðŸŒŸ Welcome to our Digital Oasis! ðŸŒŸ Here at [Blog Name], we believe in the power of words, ideas, and
                stories. As you step into our virtual realm, you're not just a visitor; you're a cherished guest
                embarking on a journey of discovery, inspiration, and connection. Our pixels hold the promise of endless
                exploration, and we invite you to make yourself at home in the boundless world of our blog.</p>
        </div>
        <div id="blogcontaner">
            <div id="blogsection">
                <div id="blogs">
                <% blog.forEach(items=>{ %>
                    <div class="blog">
                        <div class="blogitms blogimage"><img class="blogimg" src="<%= items.blogimage %>" alt="image"></div>
                        <div class="glogcontent">
                            <div class="blogitms">
                                <h2 class="blogtitle">
                                    <%= items.blogtitle %>
                                </h2>
                            </div>
                            <div class="blogitms">
                                <p class="blogdiscription">
                                    <%= items.blogdiscription.substring(0, 130).concat('...') %>
                                </p>
                            </div>
                            <div class="blogitms blogspacifications">
                                <p class="blogdete blogdata">
                                    <%= items.blogcreatedAt.toLocaleDateString() %>
                                </p>
                                <p class="blogsource blogdata">
                                    <%= items.blogsource %>
                                </p>
                            </div>
                            <!-- <div class="blogitms blogredmor"><a class="blogmorereed" href="./showblog/<%= items.blogtitle %>">Reed More</a></div> -->
                            <div class="blogitms blogredmor"><a class="blogmorereed"
                                    href="/showblog/<%= items.blogtitle %>">Reed More</a></div>
                        </div>
                    </div>
                    <!-- <hr> -->
                    <% }); %>

                        <div class="blog">
                            <div class="blogitms"><img class="blogimg"
                                    src="https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_1280.jpg"
                                    alt="image"></div>
                            <div class="glogcontent">
                                <div class="blogitms">
                                    <h2 class="blogtitle">Title</h2>
                                </div>
                                <div class="blogitms">
                                    <p class="blogdiscription">Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                                        Tempore iure molestias nemo adipisci praesentium libero exercitationem dolor
                                        facere, quasi perspiciatis?</p>
                                </div>
                                <div class="blogitms blogspacifications">
                                    <p class="blogdete blogdata">date</p>
                                    <p class="blogsource blogdata">source</p>
                                    <p class="bloglikes blogdata">like</p>
                                </div>
                                <div class="blogitms blogredmor"><a class="blogmorereed" href="">Reed More</a></div>
                            </div>
                        </div>
                    </div>
                        <hr>
                        <div id="pagination">
                            <div id="pagination-box">
                                <% if(pageno > 1){ %>
                                    <div class="pagination-items pagination-btn">
                                        <a href="?page= <%= pageno - 1 %>"><i class="bi bi-arrow-left-short"></i></a>
                                    </div>
                                    <% }%>
                                    <div class="pagination-items pagination-btn" id="pageno">
                                        <%= pageno %>
                                    </div>
                                    <div class="pagination-items">of <%= totalpages %> pages</div>
                                    <% if(pageno < totalpages){ %>
                                    <div class="pagination-items pagination-btn">
                                        <a href="?page= <%= ++pageno %>">
                                            <i class="bi bi-arrow-right-short"></i>
                                        </a>
                                    </div>
                                    <% }%>
                            </div>
                        </div>
            </div>
            <div id="blogsidebar">
                <!-- <div id="searchsection"> -->
                <!-- <form id="searchsection" action="/blog/:search?page=1" method="post"> -->
                <form id="searchsection" method="post">
                        <input type="search" name="search" id="search" class="search">
                    <div id="searchicon">
                        <!-- <a href="/blog/"><i class="bi bi-search"></i></a> -->
                        <button class="searchbtn" type="submit"><i class="bi bi-search"></i></button>
                    </div>
                </form>
                <!-- </div> -->
                <div class="nav">
                    <ul>
                        <li>
                            <a href="">category</a>
                            <ul class="dropdown">
                                <li><a href="/blog/wahicles?page=1">wahicles</a></li>
                                <li><a href="/blog/genocide?page=1">genocide</a></li>
                                <li><a href="/blog/regime change?page=1">regime change</a></li>
                                <li><a href="/blog/war?page=1">war</a></li>
                                <li><a href="/blog/visit?page=1">visit</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <%- include('partials/forter.ejs', {socialdatas:socialdatas, contactdatas:contact})-%>
</body>
        <script>
            let pageno = document.getElementById('pageno').value;
            document.getElementById('searchsection').addEventListener('submit', function (e) {
                e.preventDefault();
                pageno=1;
                let searchTerm = document.getElementById('search').value;
                console.log("Page No is this: ", pageno)
                window.location.href = `/blogsearch/${searchTerm}?page=${pageno}`;
            });
        </script>
</html>